.project_id{ data: {id: @project.id }}
.span12
  = render partial: "calendar"
.clearfix
.span12
  %button#submit.btn.btn-primary.pull-right
    Submit

#myModal.modal.hide.fade
  .modal-header
    .close{data: {dismiss: "modal"}}
    .h3 Hours Available
  .modal-body
    %table.table.table-bordered{style: "width: 100%"}
      %tr
        %th.top{style: "width: 7.7%"}
        - (1..12).to_a.each do |i|
          %th.top{style: "width: 7.7%"}= i
      %tr
        %td{style: "width: 7.7%"}= "AM"
        - (1..12).to_a.each do |i|
          %td.hours{style: "width: 7.7%", id: "#{i}"}
      %tr
        %td{style: "width: 7.7%"}= "PM"
        - (1..12).to_a.each do |i|
          %td.hours{style: "width: 7.7%", id: "#{i + 12}"}
  .modal-footer

:javascript
  $(function(){
    $('.day').css('background', 'white')

    $('#submit').click(function(){
      
    })

    $('.day').click(function(){
      var day = $(this)
      var date = day.data("date-iso")
      var id = $('.project_id').data('id')
      $('button').remove()

      $('.hours')
        .data('checked', false)
        .click(function(){
          if($(this).data('checked') == false){
            $(this)
              .data('checked', true)
              .css('background', 'green')
          }
          else{
            $(this)
              .data('checked', false)
              .css('background', 'white')
          }
        })

      var button = $('<button>Hide</button>')
        .addClass('btn pull-right')
        .click(function(){
          var datetimes = new Array()
          
          $.each( $('.hours'), function(i, value){
            if ($(value).data('checked') === true){ datetimes.push($(value).data('event_id')) }
          })

          $.post('/projects/' + id + '/create', {date: date, datetimes: datetimes}, function(response){
  
          });
          
          var green = false

          $.each($('.hours'), function(i, value){
            if($(value).data('checked') === true && !green){
               green = true
            }
          })

          if(green){
            day.css('background', 'green')
          }
          else{
            day.css('background', 'white')
          }

          $('#myModal').modal('hide')
        });

      $('.modal-footer').append(button)
      $('#myModal').modal()

    })
  })
